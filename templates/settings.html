{% extends "base.html" %}

{% block title %}Settings - BrainBudget{% endblock %}

{% block content %}
<!-- Settings Section -->
<section class="py-12 px-4 sm:px-6 lg:px-8 min-h-screen">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-12">
            <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary-500 to-primary-600 rounded-2xl shadow-lg mb-6">
                <span class="text-3xl">‚öôÔ∏è</span>
            </div>
            <h1 class="text-3xl md:text-4xl font-bold text-text-primary mb-4">
                Make BrainBudget work for your brain
            </h1>
            <p class="text-xl text-text-secondary max-w-2xl mx-auto">
                Customize your experience to match your needs and preferences. Every brain is different!
            </p>
        </div>
        
        <!-- Settings Tabs -->
        <div class="mb-8">
            <div class="flex flex-wrap justify-center border-b border-gray-200">
                <button class="settings-tab active px-6 py-3 font-medium border-b-2 border-primary-500 text-primary-600" data-tab="preferences">
                    üß† Preferences
                </button>
                <button class="settings-tab px-6 py-3 font-medium border-b-2 border-transparent text-text-muted hover:text-text-primary" data-tab="notifications">
                    üîî Notifications
                </button>
                <button class="settings-tab px-6 py-3 font-medium border-b-2 border-transparent text-text-muted hover:text-text-primary" data-tab="accounts">
                    üí≥ Accounts
                </button>
                <button class="settings-tab px-6 py-3 font-medium border-b-2 border-transparent text-text-muted hover:text-text-primary" data-tab="privacy">
                    üîí Privacy
                </button>
            </div>
        </div>
        
        <!-- Preferences Tab -->
        <div id="preferences-tab" class="settings-content active">
            <div class="space-y-8">
                <!-- ADHD-Specific Preferences -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üß†</span>
                            ADHD-Friendly Features
                        </h2>
                        <p class="text-text-secondary">Customize how information is presented to work with your brain</p>
                    </div>
                    
                    <div class="space-y-6">
                        <!-- Reduced Motion -->
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                            <div>
                                <h3 class="font-medium text-text-primary">Reduce Animations</h3>
                                <p class="text-sm text-text-secondary">Minimize moving elements for better focus</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" id="reduce-motion">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                        
                        <!-- Information Density -->
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <h3 class="font-medium text-text-primary mb-3">Information Density</h3>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" name="density" value="comfortable" class="text-primary-600 focus:ring-primary-500" checked>
                                    <span class="ml-3">
                                        <span class="font-medium text-text-primary">Comfortable</span>
                                        <span class="block text-sm text-text-secondary">Extra spacing, larger elements</span>
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="density" value="compact" class="text-primary-600 focus:ring-primary-500">
                                    <span class="ml-3">
                                        <span class="font-medium text-text-primary">Compact</span>
                                        <span class="block text-sm text-text-secondary">More information on screen</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Color Coding -->
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                            <div>
                                <h3 class="font-medium text-text-primary">Enhanced Color Coding</h3>
                                <p class="text-sm text-text-secondary">Use colors to categorize spending patterns</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" id="color-coding" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                        
                        <!-- Focus Mode -->
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                            <div>
                                <h3 class="font-medium text-text-primary">Focus Mode</h3>
                                <p class="text-sm text-text-secondary">Hide distracting elements during analysis</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" id="focus-mode">
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Display Preferences -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üé®</span>
                            Display Preferences
                        </h2>
                        <p class="text-text-secondary">Adjust the visual appearance to your liking</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Theme Selection -->
                        <div>
                            <h3 class="font-medium text-text-primary mb-3">Theme</h3>
                            <div class="grid grid-cols-3 gap-3">
                                <button class="theme-option active p-4 bg-white border-2 border-primary-500 rounded-xl text-center" data-theme="light">
                                    <div class="w-8 h-8 bg-gradient-to-br from-white to-gray-100 rounded-lg mx-auto mb-2 border"></div>
                                    <span class="text-sm font-medium">Light</span>
                                </button>
                                <button class="theme-option p-4 bg-gray-50 border-2 border-gray-200 rounded-xl text-center" data-theme="dark">
                                    <div class="w-8 h-8 bg-gradient-to-br from-gray-800 to-gray-900 rounded-lg mx-auto mb-2"></div>
                                    <span class="text-sm font-medium">Dark</span>
                                </button>
                                <button class="theme-option p-4 bg-gray-50 border-2 border-gray-200 rounded-xl text-center" data-theme="auto">
                                    <div class="w-8 h-8 bg-gradient-to-r from-white via-gray-400 to-gray-800 rounded-lg mx-auto mb-2"></div>
                                    <span class="text-sm font-medium">Auto</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Font Size -->
                        <div>
                            <h3 class="font-medium text-text-primary mb-3">Font Size</h3>
                            <select id="font-size" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                                <option value="extra-large">Extra Large</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Language & Region -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üåç</span>
                            Language & Region
                        </h2>
                        <p class="text-text-secondary">Set your language and currency preferences</p>
                    </div>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label for="language" class="block text-sm font-medium text-text-primary mb-2">Language</label>
                            <select id="language" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                                <option value="en" selected>English</option>
                                <option value="es">Espa√±ol</option>
                                <option value="fr">Fran√ßais</option>
                                <option value="de">Deutsch</option>
                            </select>
                        </div>
                        <div>
                            <label for="currency" class="block text-sm font-medium text-text-primary mb-2">Currency</label>
                            <select id="currency" class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                                <option value="USD" selected>USD ($)</option>
                                <option value="EUR">EUR (‚Ç¨)</option>
                                <option value="GBP">GBP (¬£)</option>
                                <option value="CAD">CAD ($)</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Notifications Tab -->
        <div id="notifications-tab" class="settings-content hidden">
            <div class="space-y-8">
                <!-- Notification Status -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üîî</span>
                            Gentle Financial Reminders
                        </h2>
                        <p class="text-text-secondary">Get kind, helpful notifications that work with your ADHD brain</p>
                    </div>
                    
                    <!-- Permission Status & Enable -->
                    <div id="notification-permission-status" class="mb-6">
                        <div class="p-4 bg-orange-50 border border-orange-200 rounded-xl">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <span class="text-2xl mr-3">üì±</span>
                                    <div>
                                        <h3 class="font-medium text-orange-800">Enable Browser Notifications</h3>
                                        <p class="text-sm text-orange-600">Get gentle reminders even when the app isn't open</p>
                                    </div>
                                </div>
                                <button id="enable-notifications-btn" class="bg-primary-500 text-white px-6 py-2 rounded-xl font-medium hover:bg-primary-600 gentle-transition">
                                    Enable Notifications
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Master Toggle -->
                    <div class="flex items-center justify-between p-4 bg-primary-50 rounded-xl mb-6">
                        <div>
                            <h3 class="font-medium text-text-primary">All Notifications</h3>
                            <p class="text-sm text-text-secondary">Master switch for all BrainBudget notifications</p>
                        </div>
                        <label class="relative inline-flex items-center cursor-pointer">
                            <input type="checkbox" class="sr-only peer" id="notifications-master-toggle" checked>
                            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                        </label>
                    </div>
                </div>
                
                <!-- Notification Types -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-2">What would you like to be reminded about?</h3>
                        <p class="text-text-secondary">Choose the types of gentle nudges that help you most</p>
                    </div>
                    
                    <div class="space-y-6">
                        <!-- Spending Alerts -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üí∞</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Spending Alerts</h4>
                                        <p class="text-sm text-text-secondary mt-1">Get gentle heads-ups when you're approaching budget limits</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="spending_alert" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                            <div class="ml-16">
                                <label class="block text-sm font-medium text-text-primary mb-2">Alert me when I reach:</label>
                                <select class="notification-threshold" data-type="spending_alert">
                                    <option value="70">70% of budget</option>
                                    <option value="80" selected>80% of budget</option>
                                    <option value="90">90% of budget</option>
                                    <option value="100">100% of budget (over budget)</option>
                                </select>
                            </div>
                        </div>
                        
                        <!-- Goal Achievements -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üéâ</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Goal Celebrations</h4>
                                        <p class="text-sm text-text-secondary mt-1">Celebrate your wins! You deserve recognition for your progress</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="goal_achievement" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Weekly Summaries -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üìä</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Weekly Summaries</h4>
                                        <p class="text-sm text-text-secondary mt-1">Kind, encouraging reviews of your spending week</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="weekly_summary" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                            <div class="ml-16">
                                <div class="flex items-center space-x-4">
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Day:</label>
                                        <select class="notification-setting" data-type="weekly_summary" data-setting="day">
                                            <option value="sunday" selected>Sunday</option>
                                            <option value="monday">Monday</option>
                                            <option value="saturday">Saturday</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-text-primary mb-1">Time:</label>
                                        <select class="notification-setting" data-type="weekly_summary" data-setting="time">
                                            <option value="09:00" selected>9:00 AM</option>
                                            <option value="12:00">12:00 PM</option>
                                            <option value="18:00">6:00 PM</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Unusual Patterns -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üîç</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Unusual Spending Patterns</h4>
                                        <p class="text-sm text-text-secondary mt-1">Gentle alerts when your spending looks different than usual</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="unusual_pattern">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Encouragement -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üíú</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Daily Encouragement</h4>
                                        <p class="text-sm text-text-secondary mt-1">Supportive messages to help you stay motivated</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="encouragement" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Bill Reminders -->
                        <div class="notification-type-card p-6 bg-gray-50 rounded-xl">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start">
                                    <span class="text-3xl mr-4">üìÖ</span>
                                    <div>
                                        <h4 class="font-semibold text-text-primary">Bill Reminders</h4>
                                        <p class="text-sm text-text-secondary mt-1">Gentle nudges about upcoming bills (opt-in)</p>
                                    </div>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer notification-type-toggle" data-type="bill_reminder">
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                            <div class="ml-16">
                                <label class="block text-sm font-medium text-text-primary mb-2">Remind me:</label>
                                <div class="space-y-2">
                                    <label class="flex items-center">
                                        <input type="checkbox" class="text-primary-600 focus:ring-primary-500 mr-2" checked>
                                        <span class="text-sm">3 days before due date</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="text-primary-600 focus:ring-primary-500 mr-2" checked>
                                        <span class="text-sm">1 day before due date</span>
                                    </label>
                                    <label class="flex items-center">
                                        <input type="checkbox" class="text-primary-600 focus:ring-primary-500 mr-2">
                                        <span class="text-sm">On due date</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quiet Hours & ADHD Settings -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3">üò¥</span>
                            Quiet Hours & Boundaries
                        </h3>
                        <p class="text-text-secondary">Respect your brain's need for rest and focus time</p>
                    </div>
                    
                    <div class="space-y-6">
                        <!-- Quiet Hours -->
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <div class="flex items-center justify-between mb-4">
                                <div>
                                    <h4 class="font-medium text-text-primary">Enable Quiet Hours</h4>
                                    <p class="text-sm text-text-secondary">No notifications during your rest time</p>
                                </div>
                                <label class="relative inline-flex items-center cursor-pointer">
                                    <input type="checkbox" class="sr-only peer" id="quiet-hours-toggle" checked>
                                    <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                                </label>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-1">Start Time:</label>
                                    <select id="quiet-hours-start" class="w-full">
                                        <option value="20">8:00 PM</option>
                                        <option value="21">9:00 PM</option>
                                        <option value="22" selected>10:00 PM</option>
                                        <option value="23">11:00 PM</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-text-primary mb-1">End Time:</label>
                                    <select id="quiet-hours-end" class="w-full">
                                        <option value="6">6:00 AM</option>
                                        <option value="7">7:00 AM</option>
                                        <option value="8" selected>8:00 AM</option>
                                        <option value="9">9:00 AM</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notification Tone -->
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <h4 class="font-medium text-text-primary mb-3">Communication Style</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="radio" name="notification-tone" value="gentle" class="text-primary-600 focus:ring-primary-500" checked>
                                    <span class="ml-3">
                                        <span class="font-medium text-text-primary">Gentle & Encouraging</span>
                                        <span class="block text-sm text-text-secondary">"Hey there! Just a friendly heads up..."</span>
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="radio" name="notification-tone" value="direct" class="text-primary-600 focus:ring-primary-500">
                                    <span class="ml-3">
                                        <span class="font-medium text-text-primary">Direct & Clear</span>
                                        <span class="block text-sm text-text-secondary">"You've reached 80% of your dining budget"</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <!-- Daily Limit -->
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <h4 class="font-medium text-text-primary mb-3">Daily Notification Limit</h4>
                            <div class="flex items-center space-x-4">
                                <span class="text-sm text-text-secondary">Maximum per day:</span>
                                <select id="daily-notification-limit" class="flex-1">
                                    <option value="3">3 notifications</option>
                                    <option value="5">5 notifications</option>
                                    <option value="10" selected>10 notifications</option>
                                    <option value="unlimited">No limit</option>
                                </select>
                            </div>
                            <p class="text-xs text-text-muted mt-2">Prevents notification overwhelm for ADHD brains</p>
                        </div>
                    </div>
                </div>
                
                <!-- Test & Actions -->
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold text-text-primary mb-2">Test Your Settings</h3>
                        <p class="text-text-secondary">Make sure everything works the way you want</p>
                    </div>
                    
                    <div class="flex flex-wrap gap-3 mb-6">
                        <button id="test-encouragement" class="bg-success-500 text-white px-4 py-2 rounded-xl font-medium hover:bg-success-600 gentle-transition">
                            üíú Test Encouragement
                        </button>
                        <button id="test-spending-alert" class="bg-warning-500 text-white px-4 py-2 rounded-xl font-medium hover:bg-warning-600 gentle-transition">
                            üí∞ Test Spending Alert
                        </button>
                        <button id="test-goal-celebration" class="bg-primary-500 text-white px-4 py-2 rounded-xl font-medium hover:bg-primary-600 gentle-transition">
                            üéâ Test Celebration
                        </button>
                    </div>
                    
                    <div class="border-t border-gray-200 pt-6">
                        <div class="flex flex-col sm:flex-row gap-3">
                            <button id="save-notification-settings" class="flex-1 bg-primary-500 text-white font-semibold py-3 px-6 rounded-xl hover:bg-primary-600 gentle-transition">
                                üíæ Save Preferences
                            </button>
                            <button id="reset-notification-settings" class="flex-1 border-2 border-gray-200 text-text-secondary font-semibold py-3 px-6 rounded-xl hover:bg-gray-50 gentle-transition">
                                üîÑ Reset to Defaults
                            </button>
                        </div>
                    </div>
                    
                    <!-- Emergency Options -->
                    <div class="mt-6 p-4 bg-orange-50 border border-orange-200 rounded-xl">
                        <h4 class="font-medium text-orange-800 mb-2 flex items-center">
                            <span class="mr-2">‚ö†Ô∏è</span>
                            Need a Break?
                        </h4>
                        <p class="text-sm text-orange-700 mb-3">
                            Sometimes we all need to pause notifications. That's completely okay!
                        </p>
                        <div class="flex flex-col sm:flex-row gap-2">
                            <button id="snooze-notifications" class="bg-orange-500 text-white px-4 py-2 rounded-xl text-sm font-medium hover:bg-orange-600 gentle-transition">
                                üò¥ Snooze for 24 hours
                            </button>
                            <button id="disable-all-notifications" class="border border-orange-300 text-orange-700 px-4 py-2 rounded-xl text-sm font-medium hover:bg-orange-50 gentle-transition">
                                ‚è∏Ô∏è Turn off all notifications
                            </button>
                        </div>
                    </div>
                </div>
            </div>
                
                <div class="space-y-6">
                    <!-- Spending Alerts -->
                    <div class="p-4 bg-gray-50 rounded-xl">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-medium text-text-primary">Gentle Spending Reminders</h3>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" id="spending-alerts" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                        <p class="text-sm text-text-secondary mb-4">Get kind reminders when approaching your budget limits</p>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" class="text-primary-600 focus:ring-primary-500" checked>
                                <span class="ml-2 text-sm">When I reach 75% of category budget</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="text-primary-600 focus:ring-primary-500" checked>
                                <span class="ml-2 text-sm">When I reach 90% of category budget</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="text-primary-600 focus:ring-primary-500">
                                <span class="ml-2 text-sm">Daily spending summary</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Insights -->
                    <div class="p-4 bg-gray-50 rounded-xl">
                        <div class="flex items-center justify-between mb-3">
                            <h3 class="font-medium text-text-primary">Weekly Insights</h3>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer" id="weekly-insights" checked>
                                <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"></div>
                            </label>
                        </div>
                        <p class="text-sm text-text-secondary">Receive encouraging insights about your financial progress</p>
                    </div>
                    
                    <!-- Notification Timing -->
                    <div class="p-4 bg-gray-50 rounded-xl">
                        <h3 class="font-medium text-text-primary mb-3">Notification Timing</h3>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="quiet-start" class="block text-sm font-medium text-text-secondary mb-2">Quiet Hours Start</label>
                                <input type="time" id="quiet-start" value="22:00" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                            </div>
                            <div>
                                <label for="quiet-end" class="block text-sm font-medium text-text-secondary mb-2">Quiet Hours End</label>
                                <input type="time" id="quiet-end" value="08:00" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Accounts Tab -->
        <div id="accounts-tab" class="settings-content hidden">
            <div class="space-y-6">
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üí≥</span>
                            Connected Accounts
                        </h2>
                        <p class="text-text-secondary">Manage your linked bank accounts and credit cards</p>
                    </div>
                    
                    <div class="space-y-4" id="connected-accounts-list">
                        <!-- Connected account items -->
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl">
                            <div class="flex items-center space-x-4">
                                <div class="w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center">
                                    <span class="text-white font-bold">C</span>
                                </div>
                                <div>
                                    <h3 class="font-medium text-text-primary">Chase Checking</h3>
                                    <p class="text-sm text-success-500">Connected ‚Ä¢ Last sync: 5 minutes ago</p>
                                </div>
                            </div>
                            <button class="text-red-500 hover:text-red-600 text-sm focus-ring rounded px-3 py-1">
                                Disconnect
                            </button>
                        </div>
                    </div>
                    
                    <button class="w-full mt-6 flex items-center justify-center px-6 py-4 border-2 border-dashed border-primary-300 rounded-2xl text-primary-600 hover:border-primary-400 hover:bg-primary-50 gentle-transition focus-ring">
                        <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        Add New Account
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Privacy Tab -->
        <div id="privacy-tab" class="settings-content hidden">
            <div class="space-y-6">
                <div class="bg-surface rounded-2xl p-8 shadow-sm border border-gray-100">
                    <div class="mb-6">
                        <h2 class="text-xl font-semibold text-text-primary mb-2 flex items-center">
                            <span class="mr-3 text-2xl">üîí</span>
                            Privacy & Data Control
                        </h2>
                        <p class="text-text-secondary">You have complete control over your financial data</p>
                    </div>
                    
                    <div class="space-y-6">
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <h3 class="font-medium text-text-primary mb-2">Data Retention</h3>
                            <p class="text-sm text-text-secondary mb-4">Choose how long we keep your transaction data</p>
                            <select class="w-full p-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-500">
                                <option value="1year" selected>1 Year</option>
                                <option value="2years">2 Years</option>
                                <option value="5years">5 Years</option>
                                <option value="forever">Keep Forever</option>
                            </select>
                        </div>
                        
                        <div class="p-4 bg-gray-50 rounded-xl">
                            <h3 class="font-medium text-text-primary mb-2">Data Sharing</h3>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="text-primary-600 focus:ring-primary-500">
                                    <span class="ml-3">
                                        <span class="font-medium">Anonymous Usage Analytics</span>
                                        <span class="block text-sm text-text-secondary">Help us improve BrainBudget with anonymous usage data</span>
                                    </span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="text-primary-600 focus:ring-primary-500">
                                    <span class="ml-3">
                                        <span class="font-medium">Marketing Communications</span>
                                        <span class="block text-sm text-text-secondary">Receive updates about new features and tips</span>
                                    </span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="p-4 bg-red-50 border border-red-200 rounded-xl">
                            <h3 class="font-medium text-red-800 mb-2">Danger Zone</h3>
                            <p class="text-sm text-red-600 mb-4">These actions cannot be undone</p>
                            <div class="space-y-3">
                                <button class="w-full px-4 py-2 bg-white border border-red-300 text-red-600 rounded-lg hover:bg-red-50 focus-ring">
                                    Export All My Data
                                </button>
                                <button class="w-full px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus-ring">
                                    Delete My Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Save Button -->
        <div class="mt-12 text-center">
            <button id="save-settings" class="inline-flex items-center justify-center px-8 py-4 bg-primary-500 text-white font-semibold rounded-2xl shadow-lg hover:bg-primary-600 gentle-transition focus-ring transform hover:scale-105">
                <span class="mr-3 text-xl">üíæ</span>
                Save All Settings
            </button>
        </div>
    </div>
</section>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/settings.js') }}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Tab switching functionality
        document.querySelectorAll('.settings-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const targetTab = this.dataset.tab;
                
                // Remove active class from all tabs
                document.querySelectorAll('.settings-tab').forEach(t => {
                    t.classList.remove('active', 'border-primary-500', 'text-primary-600');
                    t.classList.add('border-transparent', 'text-text-muted');
                });
                
                // Add active class to clicked tab
                this.classList.add('active', 'border-primary-500', 'text-primary-600');
                this.classList.remove('border-transparent', 'text-text-muted');
                
                // Hide all content
                document.querySelectorAll('.settings-content').forEach(content => {
                    content.classList.remove('active');
                    content.classList.add('hidden');
                });
                
                // Show target content
                const targetContent = document.getElementById(`${targetTab}-tab`);
                targetContent.classList.add('active');
                targetContent.classList.remove('hidden');
            });
        });
        
        // Theme switching
        document.querySelectorAll('.theme-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.theme-option').forEach(o => {
                    o.classList.remove('active', 'border-primary-500');
                    o.classList.add('border-gray-200');
                });
                this.classList.add('active', 'border-primary-500');
                this.classList.remove('border-gray-200');
            });
        });
        
        // Save settings
        document.getElementById('save-settings').addEventListener('click', function() {
            // Collect all settings
            const settings = {
                reduceMotion: document.getElementById('reduce-motion').checked,
                density: document.querySelector('input[name="density"]:checked').value,
                colorCoding: document.getElementById('color-coding').checked,
                focusMode: document.getElementById('focus-mode').checked,
                theme: document.querySelector('.theme-option.active').dataset.theme,
                fontSize: document.getElementById('font-size').value,
                language: document.getElementById('language').value,
                currency: document.getElementById('currency').value,
                spendingAlerts: document.getElementById('spending-alerts').checked,
                weeklyInsights: document.getElementById('weekly-insights').checked,
                quietStart: document.getElementById('quiet-start').value,
                quietEnd: document.getElementById('quiet-end').value
            };
            
            // Save to localStorage (in production, this would be an API call)
            localStorage.setItem('brainbudget-settings', JSON.stringify(settings));
            
            // Show success message
            showSuccessToast('Settings saved successfully! ‚ú®');
            
            // Apply settings immediately
            applySettings(settings);
        });
        
        // Load saved settings
        const savedSettings = localStorage.getItem('brainbudget-settings');
        if (savedSettings) {
            const settings = JSON.parse(savedSettings);
            applySettings(settings);
            populateSettings(settings);
        }
        
        function applySettings(settings) {
            // Apply reduce motion
            if (settings.reduceMotion) {
                document.documentElement.style.setProperty('--animation-duration', '0.01ms');
            }
            
            // Apply theme
            if (settings.theme === 'dark') {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
            
            // Apply font size
            const fontSizes = {
                'small': '14px',
                'medium': '16px',
                'large': '18px',
                'extra-large': '20px'
            };
            document.documentElement.style.fontSize = fontSizes[settings.fontSize] || '16px';
        }
        
        function populateSettings(settings) {
            // Populate form fields with saved values
            if (settings.reduceMotion) document.getElementById('reduce-motion').checked = true;
            if (settings.colorCoding !== undefined) document.getElementById('color-coding').checked = settings.colorCoding;
            if (settings.focusMode) document.getElementById('focus-mode').checked = true;
            if (settings.spendingAlerts !== undefined) document.getElementById('spending-alerts').checked = settings.spendingAlerts;
            if (settings.weeklyInsights !== undefined) document.getElementById('weekly-insights').checked = settings.weeklyInsights;
            if (settings.fontSize) document.getElementById('font-size').value = settings.fontSize;
            if (settings.language) document.getElementById('language').value = settings.language;
            if (settings.currency) document.getElementById('currency').value = settings.currency;
            if (settings.quietStart) document.getElementById('quiet-start').value = settings.quietStart;
            if (settings.quietEnd) document.getElementById('quiet-end').value = settings.quietEnd;
            
            // Update theme selection
            if (settings.theme) {
                document.querySelectorAll('.theme-option').forEach(o => {
                    o.classList.remove('active', 'border-primary-500');
                    o.classList.add('border-gray-200');
                });
                const themeOption = document.querySelector(`[data-theme="${settings.theme}"]`);
                if (themeOption) {
                    themeOption.classList.add('active', 'border-primary-500');
                    themeOption.classList.remove('border-gray-200');
                }
            }
            
            // Update density selection
            if (settings.density) {
                document.querySelector(`input[name="density"][value="${settings.density}"]`).checked = true;
            }
        }
    });
    
    // Load notification settings JavaScript when needed
    const notificationTab = document.querySelector('[data-tab="notifications"]');
    if (notificationTab) {
        notificationTab.addEventListener('click', () => {
            if (!window.notificationSettingsLoaded) {
                const script = document.createElement('script');
                script.src = "{{ url_for('static', filename='js/notification-settings.js') }}";
                script.onload = () => {
                    window.notificationSettingsLoaded = true;
                };
                document.head.appendChild(script);
            }
        });
    }
</script>
{% endblock %}
{% extends "base.html" %}

{% block title %}Advice - BrainBudget{% endblock %}

{% block content %}
<!-- Advice Page -->
<div class="min-h-screen" style="background-color: #EFDFC5;">
    <!-- Navigation Header -->
    <header class="absolute top-4 left-4 right-4 z-10 animate-fadeIn">
        <div class="flex justify-between items-center">
            <div class="flex space-x-8">
                <a href="/home" class="flex items-center space-x-2 hover:opacity-80 transition-colors" style="color: #252B2B;">
                    <span>ğŸ </span>
                    <span>Home</span>
                </a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Navigation links removed - only on homepage -->
            </div>
        </div>
    </header>

    <!-- Header Section -->
    <div class="relative py-16 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <div class="mb-6">
                <span class="text-6xl">ğŸ’¬</span>
            </div>
            <div class="inline-block px-8 py-4 rounded-full brain-gradient mb-6">
                <h1 class="text-4xl md:text-5xl font-bold text-white">
                    Advice
                </h1>
            </div>
            <p class="text-lg max-w-2xl mx-auto leading-relaxed" style="color: #252B2B;">
                Personalized advice for budgeting, debt, and savings that works with ADHD brains. Practical guidance without the overwhelming jargon.
            </p>
        </div>
    </div>

    <!-- Advice Content -->
    <div class="py-12 px-4">
        <div class="max-w-6xl mx-auto">
            <!-- Advice Filter Bar -->
            <div class="flex flex-wrap items-center justify-between mb-8 p-6 rounded-3xl" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                <div class="flex items-center space-x-4">
                    <h2 class="text-xl font-bold" style="color: #380F17;">Your Personalized Advice</h2>
                    <span class="px-3 py-1 rounded-full text-sm font-semibold" style="background-color: #7CEC86; color: #380F17;">5 New Tips</span>
                </div>
                <div class="flex space-x-3">
                    <select id="advice-category" class="px-4 py-2 rounded-xl border focus:outline-none focus:ring-2" style="border-color: #380F17; focus:ring-color: #380F17;">
                        <option value="all">All Topics</option>
                        <option value="budgeting">ğŸ“Š ADHD Budgeting</option>
                        <option value="debt">ğŸ’³ Debt Management</option>
                        <option value="savings">ğŸ¦ Smart Saving</option>
                        <option value="goals">ğŸ¯ Goal Achievement</option>
                        <option value="impulse">ğŸ›’ Impulse Control</option>
                    </select>
                    <button onclick="refreshAdvice()" class="px-6 py-2 rounded-xl font-semibold transition-colors hover:shadow-md" style="background-color: #380F17; color: #EFDFC5;">
                        ğŸ”„ New Advice
                    </button>
                </div>
            </div>

            <!-- Featured Advice Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- Today's Featured Advice -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(56, 15, 23, 0.9); color: #EFDFC5;">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center mr-4" style="background-color: #EFDFC5;">
                            <span style="color: #380F17; font-size: 1.5rem;">â­</span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">Today's Featured Tip</h3>
                            <p class="text-sm opacity-80">Personalized for your ADHD brain</p>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <h4 class="text-lg font-semibold">ğŸ§  The "Interest-Based" Budget</h4>
                        <p class="leading-relaxed">Instead of forcing boring categories, organize your budget around what your ADHD brain finds interesting. Make "Fun Money" a legitimate category - it reduces guilt and prevents larger impulse purchases.</p>
                        <div class="flex space-x-2 mt-4">
                            <button onclick="likeAdvice('featured')" class="px-4 py-2 rounded-lg font-semibold transition-colors" style="background-color: #EFDFC5; color: #380F17;">
                                ğŸ‘ Helpful
                            </button>
                            <button onclick="saveAdvice('featured')" class="px-4 py-2 rounded-lg font-semibold transition-colors" style="background-color: #8F0B13; color: #EFDFC5;">
                                ğŸ“Œ Save
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ADHD-Specific Tip -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(143, 11, 19, 0.9); color: #EFDFC5;">
                    <div class="flex items-center mb-4">
                        <div class="w-12 h-12 rounded-full flex items-center justify-center mr-4" style="background-color: #EFDFC5;">
                            <span style="color: #8F0B13; font-size: 1.5rem;">ğŸ§ </span>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold">ADHD Money Hack</h3>
                            <p class="text-sm opacity-80">Executive function friendly</p>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <h4 class="text-lg font-semibold">âš¡ The "2-Minute Money Rule"</h4>
                        <p class="leading-relaxed">If a financial task takes less than 2 minutes (like checking your account balance), do it immediately. This prevents the ADHD procrastination spiral and keeps you connected to your money.</p>
                        <div class="flex space-x-2 mt-4">
                            <button onclick="likeAdvice('adhd-tip')" class="px-4 py-2 rounded-lg font-semibold transition-colors" style="background-color: #EFDFC5; color: #8F0B13;">
                                ğŸ‘ Love It
                            </button>
                            <button onclick="tryAdvice('adhd-tip')" class="px-4 py-2 rounded-lg font-semibold transition-colors" style="background-color: #380F17; color: #EFDFC5;">
                                âœ¨ Try Now
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Advice Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column - Advice Categories -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Budgeting Advice -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h2 class="text-2xl font-bold mb-6 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-3xl">ğŸ“Š</span>
                            ADHD-Friendly Budgeting
                        </h2>
                        
                        <div class="space-y-4">
                            <!-- Advice Card 1 -->
                            <div class="p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8); border-left: 4px solid #7CEC86;">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl">ğŸ’š</span>
                                    <div class="flex-1">
                                        <h3 class="font-semibold mb-2" style="color: #380F17;">Start with 3 Categories Only</h3>
                                        <p class="text-sm mb-3" style="color: #252B2B;">ADHD brains get overwhelmed with too many choices. Begin with: Essentials, Fun Money, and Future Self. You can add more categories later when this feels automatic.</p>
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs px-3 py-1 rounded-full" style="background-color: #7CEC86; color: #380F17;">âœ… Beginner Friendly</span>
                                            <div class="flex space-x-2">
                                                <button onclick="likeAdvice('budget-1')" class="text-lg">ğŸ‘</button>
                                                <button onclick="saveAdvice('budget-1')" class="text-lg">ğŸ“Œ</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Advice Card 2 -->
                            <div class="p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8); border-left: 4px solid #FFC107;">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl">ğŸ’¡</span>
                                    <div class="flex-1">
                                        <h3 class="font-semibold mb-2" style="color: #380F17;">Visual Budget Tracking</h3>
                                        <p class="text-sm mb-3" style="color: #252B2B;">Use colorful progress bars or even physical jars for cash. ADHD brains respond better to visual cues than spreadsheet numbers. Make it pretty and engaging!</p>
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs px-3 py-1 rounded-full" style="background-color: #FFC107; color: #380F17;">ğŸ¨ Visual Learner</span>
                                            <div class="flex space-x-2">
                                                <button onclick="likeAdvice('budget-2')" class="text-lg">ğŸ‘</button>
                                                <button onclick="shareAdvice('budget-2')" class="text-lg">ğŸ“¤</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Advice Card 3 -->
                            <div class="p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8); border-left: 4px solid #8B5CF6;">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl">ğŸ¯</span>
                                    <div class="flex-1">
                                        <h3 class="font-semibold mb-2" style="color: #380F17;">The "Good Enough" Budget</h3>
                                        <p class="text-sm mb-3" style="color: #252B2B;">Perfectionism kills ADHD motivation. Aim for 80% accuracy, not 100%. A "good enough" budget you actually use beats a perfect one you abandon after two weeks.</p>
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs px-3 py-1 rounded-full" style="background-color: #8B5CF6; color: white;">ğŸ’ª Mindset Shift</span>
                                            <div class="flex space-x-2">
                                                <button onclick="likeAdvice('budget-3')" class="text-lg">ğŸ‘</button>
                                                <button onclick="implementAdvice('budget-3')" class="text-lg">âš¡</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Impulse Control Advice -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h2 class="text-2xl font-bold mb-6 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-3xl">ğŸ›’</span>
                            Impulse Purchase Management
                        </h2>
                        
                        <div class="space-y-4">
                            <!-- Impulse Advice 1 -->
                            <div class="p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8); border-left: 4px solid #FF6B6B;">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl">â°</span>
                                    <div class="flex-1">
                                        <h3 class="font-semibold mb-2" style="color: #380F17;">The ADHD "Wait" Strategy</h3>
                                        <p class="text-sm mb-3" style="color: #252B2B;">For purchases over $50: Wait 1 day per $10. A $100 item = 10 day wait. ADHD hyperfocus fades, but genuine needs persist. This filters out impulse from actual necessity.</p>
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs px-3 py-1 rounded-full" style="background-color: #FF6B6B; color: white;">ğŸ§˜ Impulse Control</span>
                                            <div class="flex space-x-2">
                                                <button onclick="likeAdvice('impulse-1')" class="text-lg">ğŸ‘</button>
                                                <button onclick="setReminder('impulse-1')" class="text-lg">â°</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Impulse Advice 2 -->
                            <div class="p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8); border-left: 4px solid #4ECDC4;">
                                <div class="flex items-start space-x-3">
                                    <span class="text-2xl">ğŸ“</span>
                                    <div class="flex-1">
                                        <h3 class="font-semibold mb-2" style="color: #380F17;">The "Want vs Need" Text Test</h3>
                                        <p class="text-sm mb-3" style="color: #252B2B;">Before buying, text a friend: "I want to buy [item] because [reason]." Explaining purchases out loud engages your prefrontal cortex and often reveals the impulse nature.</p>
                                        <div class="flex items-center justify-between">
                                            <span class="text-xs px-3 py-1 rounded-full" style="background-color: #4ECDC4; color: white;">ğŸ¤ Accountability</span>
                                            <div class="flex space-x-2">
                                                <button onclick="likeAdvice('impulse-2')" class="text-lg">ğŸ‘</button>
                                                <button onclick="findBuddy('impulse-2')" class="text-lg">ğŸ‘¥</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="space-y-6">
                    <!-- Saved Advice -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h3 class="text-xl font-bold mb-4 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-2xl">ğŸ“Œ</span>
                            Saved Tips
                        </h3>
                        <div class="space-y-3 text-sm">
                            <div class="p-3 rounded-lg cursor-pointer hover:shadow-md transition-colors" style="background-color: rgba(239, 223, 197, 0.6);">
                                <h4 class="font-semibold" style="color: #380F17;">2-Minute Money Rule</h4>
                                <p class="text-xs" style="color: #4C4F54;">Saved yesterday</p>
                            </div>
                            <div class="p-3 rounded-lg cursor-pointer hover:shadow-md transition-colors" style="background-color: rgba(239, 223, 197, 0.6);">
                                <h4 class="font-semibold" style="color: #380F17;">Visual Budget Tracking</h4>
                                <p class="text-xs" style="color: #4C4F54;">Saved 3 days ago</p>
                            </div>
                            <div class="p-3 rounded-lg cursor-pointer hover:shadow-md transition-colors" style="background-color: rgba(239, 223, 197, 0.6);">
                                <h4 class="font-semibold" style="color: #380F17;">Interest-Based Budget</h4>
                                <p class="text-xs" style="color: #4C4F54;">Saved 1 week ago</p>
                            </div>
                        </div>
                        <button onclick="viewAllSaved()" class="w-full mt-4 p-2 rounded-lg font-semibold transition-colors" style="background-color: #380F17; color: #EFDFC5;">
                            View All Saved
                        </button>
                    </div>

                    <!-- Advice Categories -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h3 class="text-xl font-bold mb-4 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-2xl">ğŸ¯</span>
                            Browse Topics
                        </h3>
                        <div class="space-y-2">
                            <button onclick="filterAdvice('budgeting')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md text-left" style="background-color: #380F17; color: #EFDFC5;">
                                ğŸ“Š ADHD Budgeting
                            </button>
                            <button onclick="filterAdvice('debt')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md text-left" style="background-color: #8F0B13; color: #EFDFC5;">
                                ğŸ’³ Debt Strategy
                            </button>
                            <button onclick="filterAdvice('savings')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md text-left" style="background-color: #252B2B; color: #EFDFC5;">
                                ğŸ¦ Smart Saving
                            </button>
                            <button onclick="filterAdvice('goals')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md text-left" style="background-color: #4C4F54; color: #EFDFC5;">
                                ğŸ¯ Goal Achievement
                            </button>
                        </div>
                    </div>

                    <!-- Daily Motivation -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(56, 15, 23, 0.9); color: #EFDFC5;">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <span class="mr-3 text-2xl">ğŸ’ª</span>
                            Daily Motivation
                        </h3>
                        <div class="text-sm leading-relaxed">
                            <p class="mb-3">ğŸŒŸ <strong>Progress Over Perfection:</strong> Every small financial win counts, especially for ADHD brains!</p>
                            <p class="text-xs opacity-80">Your neurodivergent brain has unique strengths. These tips are designed to work WITH your brain, not against it. Celebrate every victory!</p>
                            <button onclick="shareMotivation()" class="mt-3 px-4 py-2 rounded-lg font-semibold transition-colors" style="background-color: #EFDFC5; color: #380F17;">
                                Share Success
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-8 text-center animate-fadeIn">
        <div class="max-w-4xl mx-auto px-4">
            <p class="text-sm" style="color: #4C4F54;">
                BrainBudget - Making budgeting accessible | powered by <span class="font-semibold" style="color: #8F0B13;">Niostudio</span>
            </p>
        </div>
    </footer>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load personalized advice
    loadAdvice();
    
    // Set up advice filtering
    setupAdviceFiltering();
    
    // Auto-refresh advice periodically
    setInterval(loadAdvice, 1800000); // Every 30 minutes
    
    function loadAdvice() {
        // Load personalized advice based on user profile
        fetch('/api/advice/personalized')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateAdviceDisplay(data.advice);
                }
            })
            .catch(error => {
                console.log('Using demo advice data');
            });
        
        // Load saved advice
        fetch('/api/advice/saved')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    updateSavedAdvice(data.saved);
                }
            })
            .catch(error => {
                console.log('Using demo saved advice');
            });
    }
    
    function updateAdviceDisplay(advice) {
        console.log('Personalized advice loaded:', advice);
    }
    
    function updateSavedAdvice(saved) {
        console.log('Saved advice loaded:', saved);
    }
    
    function setupAdviceFiltering() {
        const categorySelect = document.getElementById('advice-category');
        categorySelect.addEventListener('change', function() {
            filterAdvice(this.value);
        });
    }
    
    // Advice interaction functions
    window.refreshAdvice = function() {
        showSuccessToast('ğŸ”„ Loading fresh, personalized advice for your ADHD brain!');
        loadAdvice();
    };
    
    window.likeAdvice = function(adviceId) {
        showSuccessToast('ğŸ‘ Thanks for the feedback! This helps us provide better ADHD-friendly advice.');
        // Send feedback to backend
        fetch('/api/advice/feedback', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ adviceId, type: 'like' })
        }).catch(error => console.log('Feedback logged locally'));
    };
    
    window.saveAdvice = function(adviceId) {
        showSuccessToast('ğŸ“Œ Advice saved! You can find it in your saved tips section.');
        // Save advice for later
        fetch('/api/advice/save', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ adviceId })
        }).catch(error => console.log('Advice saved locally'));
    };
    
    window.shareAdvice = function(adviceId) {
        showSuccessToast('ğŸ“¤ Great advice to share! Community sharing coming soon.');
    };
    
    window.tryAdvice = function(adviceId) {
        showSuccessToast('âœ¨ Ready to try it out? We\'ll help you implement this tip step by step!');
    };
    
    window.implementAdvice = function(adviceId) {
        showSuccessToast('âš¡ Implementation guide coming soon! We\'ll break this down into ADHD-friendly steps.');
    };
    
    window.setReminder = function(adviceId) {
        showSuccessToast('â° Reminder feature coming soon! We\'ll help you remember to apply this advice.');
    };
    
    window.findBuddy = function(adviceId) {
        showSuccessToast('ğŸ‘¥ Accountability buddy matching coming soon! Connect with others for support.');
    };
    
    window.filterAdvice = function(category) {
        showSuccessToast(`ğŸ¯ Filtering advice for ${category}. Personalized recommendations coming up!`);
        // Filter advice display by category
        console.log('Filtering advice for category:', category);
    };
    
    window.viewAllSaved = function() {
        showSuccessToast('ğŸ“š Full saved advice library coming soon! All your favorite tips in one place.');
    };
    
    window.shareMotivation = function() {
        showSuccessToast('ğŸŒŸ Share your success story with the BrainBudget community! Inspiring others helps everyone.');
    };
    
    // ADHD-friendly animations for advice cards
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe advice cards for entrance animations
    document.querySelectorAll('.card-hover').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
    
    // Add hover effects for dopamine rewards
    document.querySelectorAll('[onclick*="likeAdvice"]').forEach(button => {
        button.addEventListener('mouseenter', () => {
            button.style.transform = 'scale(1.1)';
        });
        button.addEventListener('mouseleave', () => {
            button.style.transform = 'scale(1)';
        });
    });
});
</script>
{% endblock %}
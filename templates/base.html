<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}BrainBudget - ADHD-Friendly Financial Management{% endblock %}</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block description %}Transform your financial chaos into clarity with AI-powered insights, gentle guidance, and neurodivergent-friendly design that actually works with your brain.{% endblock %}">
    <meta property="og:title" content="{% block og_title %}BrainBudget - ADHD-Friendly Financial Management{% endblock %}">
    <meta property="og:description" content="{% block og_description %}The first budgeting app designed specifically for ADHD brains{% endblock %}">
    <meta property="og:type" content="website">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles -->
    <style>
        body { 
            background-color: #EFDFC5; 
            font-family: 'Inter', system-ui, sans-serif; 
        }
        
        body.auth-page { 
            background-color: #252B2B; 
        }
        
        .brain-gradient { 
            background: linear-gradient(135deg, #380F17 0%, #8F0B13 100%); 
        }
        
        .card-hover { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
        }
        
        .card-hover:hover { 
            transform: translateY(-4px); 
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1); 
        }
        
        .animate-fadeIn { 
            animation: fadeIn 0.8s ease-out forwards; 
        }
        
        .animate-slideUp { 
            animation: slideUp 0.6s ease-out forwards; 
        }
        
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        @keyframes slideUp { 
            from { opacity: 0; transform: translateY(30px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .success-popup { 
            animation: popIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
        }
        
        @keyframes popIn { 
            0% { transform: scale(0.8) translateY(-20px); opacity: 0; } 
            100% { transform: scale(1) translateY(0); opacity: 1; } 
        }

        /* ADHD-friendly focus indicators */
        .focus-visible:focus-visible {
            outline: 3px solid #380F17;
            outline-offset: 2px;
            border-radius: 0.5rem;
        }
        
        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .animate-fadeIn,
            .animate-slideUp,
            .card-hover:hover {
                animation: none;
                transition: none;
                transform: none;
            }
        }
        
        {% block extra_styles %}{% endblock %}
    </style>
    
    {% block head_scripts %}{% endblock %}
</head>
<body class="min-h-screen{% if request.endpoint and 'auth' in request.endpoint %} auth-page{% endif %}">
    {% block content %}{% endblock %}
    
    
    <!-- Custom Confirmation Modal -->
    <div id="confirmation-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="max-w-md mx-4 rounded-3xl p-8 shadow-2xl animate-fadeIn" style="background-color: #EFDFC5;">
            <div class="text-center">
                <div id="modal-icon" class="text-6xl mb-4">üö™</div>
                <h3 id="modal-title" class="text-2xl font-bold mb-4" style="color: #380F17;">Confirm Action</h3>
                <p id="modal-message" class="mb-8 leading-relaxed" style="color: #252B2B;">Are you sure you want to proceed?</p>
                <div class="flex space-x-4 justify-center">
                    <button id="modal-cancel" class="px-6 py-3 rounded-xl font-semibold transition-colors hover:shadow-lg" style="background-color: #4C4F54; color: #EFDFC5;">
                        Cancel
                    </button>
                    <button id="modal-confirm" class="px-6 py-3 rounded-xl font-semibold transition-colors hover:shadow-lg brain-gradient text-white">
                        Confirm
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Toast Notification -->
    <div id="success-toast" class="fixed bottom-4 right-4 rounded-xl shadow-lg transform translate-y-full transition-transform duration-300 z-50 hidden brain-gradient text-white px-6 py-4">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 text-2xl">‚úÖ</div>
            <div class="flex-1">
                <p class="font-medium" id="success-message">Success! üéâ</p>
            </div>
        </div>
    </div>
    
    <!-- Error Toast Notification -->
    <div id="error-toast" class="fixed bottom-4 right-4 rounded-xl shadow-lg transform translate-y-full transition-transform duration-300 z-50 hidden px-6 py-4 text-white" style="background-color: #8F0B13;">
        <div class="flex items-center space-x-3">
            <div class="flex-shrink-0 text-2xl">‚ùå</div>
            <div class="flex-1">
                <p class="font-medium" id="error-message">Something went wrong</p>
            </div>
        </div>
    </div>
    
    <!-- Core JavaScript -->
    <script>
        // Toast notification functions
        function showSuccessToast(message) {
            const toast = document.getElementById('success-toast');
            const messageEl = document.getElementById('success-message');
            messageEl.textContent = message;
            
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.style.transform = 'translateY(0)';
            }, 100);
            
            setTimeout(() => {
                toast.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, 4000);
        }
        
        function showErrorToast(message) {
            const toast = document.getElementById('error-toast');
            const messageEl = document.getElementById('error-message');
            messageEl.textContent = message;
            
            toast.classList.remove('hidden');
            setTimeout(() => {
                toast.style.transform = 'translateY(0)';
            }, 100);
            
            setTimeout(() => {
                toast.style.transform = 'translateY(100%)';
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, 4000);
        }
        
        // Custom confirmation modal functions
        function showConfirmModal(options) {
            const modal = document.getElementById('confirmation-modal');
            const icon = document.getElementById('modal-icon');
            const title = document.getElementById('modal-title');
            const message = document.getElementById('modal-message');
            const cancelBtn = document.getElementById('modal-cancel');
            const confirmBtn = document.getElementById('modal-confirm');
            
            // Set modal content
            icon.textContent = options.icon || '‚ùì';
            title.textContent = options.title || 'Confirm Action';
            message.textContent = options.message || 'Are you sure you want to proceed?';
            cancelBtn.textContent = options.cancelText || 'Cancel';
            confirmBtn.textContent = options.confirmText || 'Confirm';
            
            // Show modal
            modal.classList.remove('hidden');
            
            // Return a promise for the user's choice
            return new Promise((resolve) => {
                const handleCancel = () => {
                    modal.classList.add('hidden');
                    cancelBtn.removeEventListener('click', handleCancel);
                    confirmBtn.removeEventListener('click', handleConfirm);
                    resolve(false);
                };
                
                const handleConfirm = () => {
                    modal.classList.add('hidden');
                    cancelBtn.removeEventListener('click', handleCancel);
                    confirmBtn.removeEventListener('click', handleConfirm);
                    resolve(true);
                };
                
                cancelBtn.addEventListener('click', handleCancel);
                confirmBtn.addEventListener('click', handleConfirm);
                
                // Close on background click
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        handleCancel();
                    }
                });
            });
        }
        
        // Initialize animations on page load
        document.addEventListener('DOMContentLoaded', function() {
            const elements = document.querySelectorAll('.animate-slideUp');
            elements.forEach((el, index) => {
                el.style.animationDelay = `${index * 0.2}s`;
                el.style.opacity = '0';
                setTimeout(() => {
                    el.style.opacity = '1';
                }, index * 200);
            });
        });
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
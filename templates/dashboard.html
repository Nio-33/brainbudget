{% extends "base.html" %}

{% block title %}Dashboard - BrainBudget{% endblock %}

{% block content %}
<!-- Dashboard Page -->
<div class="min-h-screen" style="background-color: #EFDFC5;">
    <!-- Navigation Header -->
    <header class="absolute top-4 left-4 right-4 z-10 animate-fadeIn">
        <div class="flex justify-between items-center">
            <div class="flex space-x-8">
                <a href="/home" class="flex items-center space-x-2 hover:opacity-80 transition-colors" style="color: #252B2B;">
                    <span>üè†</span>
                    <span>Home</span>
                </a>
            </div>
            <div class="flex items-center space-x-4">
                <!-- Navigation links removed - only on homepage -->
            </div>
        </div>
    </header>

    <!-- Header Section -->
    <div class="relative py-16 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <div class="mb-6">
                <span class="text-6xl">üìä</span>
            </div>
            <div class="inline-block px-8 py-4 rounded-full brain-gradient mb-6">
                <h1 class="text-4xl md:text-5xl font-bold text-white">
                    Dashboard
                </h1>
            </div>
            <p class="text-lg max-w-2xl mx-auto leading-relaxed" style="color: #252B2B;">
                A clear, user-friendly overview of your finances with visual cues and gentle insights to help you stay on track.
            </p>
        </div>
    </div>

    <!-- Dashboard Content -->
    <div class="py-12 px-4">
        <div class="max-w-6xl mx-auto">
            <!-- Quick Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <!-- Account Balance -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(56, 15, 23, 0.9); color: #EFDFC5;">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üí∞</span>
                        <div class="text-right">
                            <div class="text-sm opacity-80">Account Balance</div>
                            <div class="text-2xl font-bold">$3,247.83</div>
                        </div>
                    </div>
                    <div class="text-xs opacity-80">+$127 from last month</div>
                </div>

                <!-- Monthly Spending -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(143, 11, 19, 0.9); color: #EFDFC5;">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üí∏</span>
                        <div class="text-right">
                            <div class="text-sm opacity-80">This Month</div>
                            <div class="text-2xl font-bold">$1,856.42</div>
                        </div>
                    </div>
                    <div class="text-xs opacity-80">-$203 from last month</div>
                </div>

                <!-- Budget Status -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(37, 43, 43, 0.9); color: #EFDFC5;">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üéØ</span>
                        <div class="text-right">
                            <div class="text-sm opacity-80">Budget Status</div>
                            <div class="text-2xl font-bold">72%</div>
                        </div>
                    </div>
                    <div class="text-xs opacity-80">$560 remaining this month</div>
                </div>

                <!-- Savings Goal -->
                <div class="backdrop-blur-sm rounded-3xl p-6 card-hover" style="background-color: rgba(76, 79, 84, 0.9); color: #EFDFC5;">
                    <div class="flex items-center justify-between mb-4">
                        <span class="text-3xl">üèÜ</span>
                        <div class="text-right">
                            <div class="text-sm opacity-80">Emergency Fund</div>
                            <div class="text-2xl font-bold">$1,200</div>
                        </div>
                    </div>
                    <div class="text-xs opacity-80">48% of $2,500 goal</div>
                </div>
            </div>

            <!-- Main Dashboard Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Left Column - 2/3 width -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- Spending Overview Chart -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h2 class="text-2xl font-bold mb-6 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-3xl">üìà</span>
                            Spending Trends
                        </h2>
                        
                        <!-- Simple Visual Chart -->
                        <div class="space-y-4">
                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8);">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üõí</span>
                                    <div>
                                        <h3 class="font-semibold" style="color: #380F17;">Groceries & Food</h3>
                                        <p class="text-sm" style="color: #4C4F54;">$487.23 this month</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="w-32 bg-gray-200 rounded-full h-3 mb-2">
                                        <div class="h-3 rounded-full brain-gradient" style="width: 65%;"></div>
                                    </div>
                                    <div class="text-xs" style="color: #4C4F54;">65% of budget</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8);">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üöó</span>
                                    <div>
                                        <h3 class="font-semibold" style="color: #380F17;">Transportation</h3>
                                        <p class="text-sm" style="color: #4C4F54;">$312.89 this month</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="w-32 bg-gray-200 rounded-full h-3 mb-2">
                                        <div class="h-3 rounded-full" style="background-color: #8F0B13; width: 42%;"></div>
                                    </div>
                                    <div class="text-xs" style="color: #4C4F54;">42% of budget</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.8);">
                                <div class="flex items-center space-x-3">
                                    <span class="text-2xl">üéÆ</span>
                                    <div>
                                        <h3 class="font-semibold" style="color: #380F17;">Entertainment</h3>
                                        <p class="text-sm" style="color: #4C4F54;">$156.78 this month</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="w-32 bg-gray-200 rounded-full h-3 mb-2">
                                        <div class="h-3 rounded-full" style="background-color: #252B2B; width: 31%;"></div>
                                    </div>
                                    <div class="text-xs" style="color: #4C4F54;">31% of budget</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <div class="flex items-center justify-between mb-6">
                            <h2 class="text-2xl font-bold flex items-center" style="color: #380F17;">
                                <span class="mr-3 text-3xl">üí≥</span>
                                Recent Transactions
                            </h2>
                            <a href="#" class="text-sm font-semibold hover:underline" style="color: #8F0B13;">View All</a>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.6);">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: #380F17;">
                                        <span class="text-white text-sm">üõí</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-sm" style="color: #380F17;">Whole Foods Market</h4>
                                        <p class="text-xs" style="color: #4C4F54;">Today, 2:30 PM ‚Ä¢ Groceries</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold" style="color: #8F0B13;">-$67.42</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.6);">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: #8F0B13;">
                                        <span class="text-white text-sm">‚õΩ</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-sm" style="color: #380F17;">Shell Gas Station</h4>
                                        <p class="text-xs" style="color: #4C4F54;">Yesterday, 8:15 AM ‚Ä¢ Transportation</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold" style="color: #8F0B13;">-$45.20</div>
                                </div>
                            </div>

                            <div class="flex items-center justify-between p-4 rounded-2xl" style="background-color: rgba(239, 223, 197, 0.6);">
                                <div class="flex items-center space-x-3">
                                    <div class="w-10 h-10 rounded-full flex items-center justify-center" style="background-color: #252B2B;">
                                        <span class="text-white text-sm">üí∞</span>
                                    </div>
                                    <div>
                                        <h4 class="font-semibold text-sm" style="color: #380F17;">Salary Deposit</h4>
                                        <p class="text-xs" style="color: #4C4F54;">Dec 15 ‚Ä¢ Income</p>
                                    </div>
                                </div>
                                <div class="text-right">
                                    <div class="font-semibold" style="color: #7ED321;">+$2,850.00</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar -->
                <div class="lg:col-span-1 space-y-6">
                    <!-- User-Friendly Quick Actions -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h3 class="text-xl font-bold mb-4 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-2xl">‚ö°</span>
                            Quick Actions
                        </h3>
                        <div class="space-y-3">
                            <button onclick="showFeature('add-expense')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md" style="background-color: #380F17; color: #EFDFC5;">
                                üí∏ Log Expense
                            </button>
                            <button onclick="showFeature('set-budget')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md" style="background-color: #8F0B13; color: #EFDFC5;">
                                üéØ Update Budget
                            </button>
                            <button onclick="showFeature('savings')" class="w-full p-3 rounded-xl font-semibold transition-colors hover:shadow-md" style="background-color: #252B2B; color: #EFDFC5;">
                                üèÜ Add to Savings
                            </button>
                        </div>
                    </div>

                    <!-- Monthly Goals Progress -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(255, 255, 255, 0.9); border: 1px solid #380F17;">
                        <h3 class="text-xl font-bold mb-4 flex items-center" style="color: #380F17;">
                            <span class="mr-3 text-2xl">üéØ</span>
                            Monthly Goals
                        </h3>
                        <div class="space-y-4">
                            <div>
                                <div class="flex justify-between text-sm mb-2" style="color: #252B2B;">
                                    <span>Stay Under Budget</span>
                                    <span>72%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="h-3 rounded-full brain-gradient" style="width: 72%;"></div>
                                </div>
                                <div class="text-xs mt-1" style="color: #4C4F54;">$560 remaining</div>
                            </div>
                            
                            <div>
                                <div class="flex justify-between text-sm mb-2" style="color: #252B2B;">
                                    <span>Emergency Fund</span>
                                    <span>48%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="h-3 rounded-full" style="background-color: #8F0B13; width: 48%;"></div>
                                </div>
                                <div class="text-xs mt-1" style="color: #4C4F54;">$1,200 of $2,500</div>
                            </div>
                            
                            <div>
                                <div class="flex justify-between text-sm mb-2" style="color: #252B2B;">
                                    <span>Reduce Takeout</span>
                                    <span>85%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-3">
                                    <div class="h-3 rounded-full" style="background-color: #7ED321; width: 85%;"></div>
                                </div>
                                <div class="text-xs mt-1" style="color: #4C4F54;">Great progress! üéâ</div>
                            </div>
                        </div>
                    </div>

                    <!-- Daily Tips Widget -->
                    <div class="backdrop-blur-sm rounded-3xl p-6" style="background-color: rgba(56, 15, 23, 0.9); color: #EFDFC5;">
                        <h3 class="text-xl font-bold mb-4 flex items-center">
                            <span class="mr-3 text-2xl">üß†</span>
                            Tip of the Day
                        </h3>
                        <div class="text-sm leading-relaxed">
                            <p class="mb-3">üí° <strong>Dopamine Reward:</strong> You logged 3 expenses this week! Your brain loves these small wins.</p>
                            <p class="text-xs opacity-80">Remember: Progress over perfection. Every small step counts toward your financial wellness.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-8 text-center animate-fadeIn">
        <div class="max-w-4xl mx-auto px-4">
            <p class="text-sm" style="color: #4C4F54;">
                BrainBudget - Making budgeting fun | powered by <span class="font-semibold" style="color: #8F0B13;">Niostudio</span>
            </p>
        </div>
    </footer>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Load dashboard data
    loadDashboardData();
    
    // Simulate real-time updates
    setInterval(updateDashboard, 30000); // Update every 30 seconds
    
    function loadDashboardData() {
        // Load account balance
        fetch('/api/dashboard/balance')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update balance display
                    console.log('Balance loaded:', data.balance);
                }
            })
            .catch(error => {
                console.log('Using demo data for balance');
            });
        
        // Load spending data
        fetch('/api/dashboard/spending')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update spending charts
                    console.log('Spending data loaded:', data);
                }
            })
            .catch(error => {
                console.log('Using demo data for spending');
            });
        
        // Load recent transactions
        fetch('/api/dashboard/transactions')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Update transactions list
                    console.log('Transactions loaded:', data.transactions);
                }
            })
            .catch(error => {
                console.log('Using demo data for transactions');
            });
    }
    
    function updateDashboard() {
        // Subtle updates for user-friendly experience
        const stats = document.querySelectorAll('[style*="rgba(56, 15, 23, 0.9)"] .text-2xl.font-bold')[0];
        if (stats && Math.random() > 0.8) {
            // Very subtle balance update animation
            stats.style.transform = 'scale(1.05)';
            setTimeout(() => {
                stats.style.transform = 'scale(1)';
            }, 200);
        }
    }
    
    // Feature placeholders
    window.showFeature = function(feature) {
        const features = {
            'add-expense': 'üí∏ Quick expense logging coming soon! This will let you add expenses with voice input and photo receipts.',
            'set-budget': 'üéØ Budget adjustment feature coming soon! Set flexible, personalized spending limits.',
            'savings': 'üèÜ Savings booster coming soon! Automatic micro-savings and goal tracking.'
        };
        
        if (features[feature]) {
            showSuccessToast(features[feature]);
        }
    };
    
    // User-friendly animations on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe cards for gentle entrance animations
    document.querySelectorAll('.card-hover').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
});
</script>
{% endblock %}